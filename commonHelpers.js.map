{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function searchImages(q) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const PARAMS = new URLSearchParams({\n    key: '44431015-10991196da62062e34a604eda',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  const url = `${BASE_URL}${END_POINT}?${PARAMS}`;\n\n  const headers = {\n    'X-RateLimit-Limit':\n      'The maximum number of requests that the consumer is permitted to make in 30 minutes.',\n    'X-RateLimit-Remaining':\n      'The number of requests remaining in the current rate limit window.',\n    'X-RateLimit-Reset':\n      'The remaining time in seconds after which the current rate limit window resets.',\n  };\n  return fetch(url).then(res => res.json());\n}\n","export function imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\"><a href=\"${largeImageURL}\" class=\"gallery-link\"><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\"/></a>\n  <ul class=\"descr\">\n      <li class=\"descr-item\">\n        <p><b>Likes</b></p>\n        <p>${likes}</p>\n      </li>\n      <li class=\"descr-item\">\n        <p><b>Views</b></p>\n        <p>${views}</p>\n      </li>\n      <li class=\"descr-item\">\n        <p><b>Comments</b></p>\n        <p>${comments}</p>\n      </li>\n      <li class=\"descr-item\">\n        <p><b>Downloads</b></p>\n        <p>${downloads}</p>\n      </li>\n    </ul>\n    </li>`;\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nconst formSearch = document.querySelector('.form');\nconst galleryElem = document.querySelector('.gallery');\nconst loaderElem = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nformSearch.addEventListener('submit', onSearchBtnSubmit);\n\nfunction onSearchBtnSubmit(event) {\n  event.preventDefault();\n\n  const searchValue = formSearch.elements.search.value;\n\n  if (searchValue === '') {\n    galleryElem.innerHTML = '';\n    displayMessage('Please enter data for search', '#ffa000');\n    return;\n  }\n  showLoader();\n\n  searchImages(searchValue)\n    .then(data => {\n      if (data.hits.length === 0) {\n        galleryElem.innerHTML = '';\n        displayMessage(\n          'Sorry, there are no images matching your search query. Please try again!',\n          '#ef4040'\n        );\n      } else {\n        const markup = imagesTemplate(data.hits);\n        galleryElem.innerHTML = markup;\n        lightbox.refresh();\n      }\n    })\n    .catch(err =>\n      displayMessage(\n        'An error occurred while fetching photos. Please try again later.',\n        '#EF4040'\n      )\n    )\n    .finally(() => {\n      hideLoader();\n    });\n\n  formSearch.reset();\n}\n\nfunction displayMessage(message, color) {\n  iziToast.show({\n    message: message,\n    position: 'topRight',\n    backgroundColor: color,\n    messageColor: '#fff',\n    theme: 'dark',\n    maxWidth: '350px',\n  });\n}\n\nfunction showLoader() {\n  loaderElem.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loaderElem.classList.add('visually-hidden');\n}\n"],"names":["searchImages","q","BASE_URL","END_POINT","PARAMS","url","res","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","formSearch","galleryElem","loaderElem","lightbox","SimpleLightbox","onSearchBtnSubmit","event","searchValue","displayMessage","showLoader","data","markup","err","hideLoader","message","color","iziToast"],"mappings":"6vBAAO,SAASA,EAAaC,EAAG,CAC9B,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAAH,EACA,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAU7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC1C,CCtBO,SAASC,EAAc,CAC5B,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO,qCAAqCL,CAAa,oCAAoCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,aAI5GC,CAAK;AAAA;AAAA;AAAA;AAAA,aAILC,CAAK;AAAA;AAAA;AAAA;AAAA,aAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,aAIRC,CAAS;AAAA;AAAA;AAAA,UAItB,CAEO,SAASC,EAAeC,EAAQ,CACrC,OAAOA,EAAO,IAAIT,CAAa,EAAE,KAAK,EAAE,CAC1C,CCxBA,MAAMU,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAa,SAAS,cAAc,SAAS,EAE7CC,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,IACd,aAAc,KAChB,CAAC,EAEDJ,EAAW,iBAAiB,SAAUK,CAAiB,EAEvD,SAASA,EAAkBC,EAAO,CAChCA,EAAM,eAAc,EAEpB,MAAMC,EAAcP,EAAW,SAAS,OAAO,MAE/C,GAAIO,IAAgB,GAAI,CACtBN,EAAY,UAAY,GACxBO,EAAe,+BAAgC,SAAS,EACxD,MACD,CACDC,IAEA1B,EAAawB,CAAW,EACrB,KAAKG,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EACvBT,EAAY,UAAY,GACxBO,EACE,2EACA,SACV,MACa,CACL,MAAMG,EAASb,EAAeY,EAAK,IAAI,EACvCT,EAAY,UAAYU,EACxBR,EAAS,QAAO,CACjB,CACP,CAAK,EACA,MAAMS,GACLJ,EACE,mEACA,SACD,CACF,EACA,QAAQ,IAAM,CACbK,GACN,CAAK,EAEHb,EAAW,MAAK,CAClB,CAEA,SAASQ,EAAeM,EAASC,EAAO,CACtCC,EAAS,KAAK,CACZ,QAASF,EACT,SAAU,WACV,gBAAiBC,EACjB,aAAc,OACd,MAAO,OACP,SAAU,OACd,CAAG,CACH,CAEA,SAASN,GAAa,CACpBP,EAAW,UAAU,OAAO,iBAAiB,CAC/C,CAEA,SAASW,GAAa,CACpBX,EAAW,UAAU,IAAI,iBAAiB,CAC5C"}